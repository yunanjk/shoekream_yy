<link rel="stylesheet" href="/src/styles/layer.css">
<!--<link rel="stylesheet" href="/src/styles/layer_user.css">-->
<script src="https://code.jquery.com/jquery-3.6.3.min.js"
        integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
<html xmlns:th="http://www.thymeleaf.org">



<!--<div th:fragment="admin_register" class="layer_admin_register layer lg" style="display: none">-->


<div th:fragment="admin_register" class="layer_user_create layer lg" style="display: none">
<div class="layer_name layer lg">
    <div class="layer_container">
        <a onclick="close_member_create()" class="btn_layer_close">
            <div>
                <img src="/img/close_white.png">
            </div>
        </a>

        <div class="layer_header">
            <h2 class="title"> 사용자 등록페이지 </h2>
        </div>
        <div class="layer_content">
        <div class="top">
            <div class="user_bind">
                <div class="user_input">
<!--                    <div class="input_box">-->
<!--                        <h4 class="input_title">사용자 번호(id)</h4>-->
<!--                        <div class="input_item">-->
<!--                            <input type="text" placeholder="131" autocomplete="off" class="input_txt">-->
<!--                        </div>-->

<!--                    </div>-->
<!--                    <div class="input_box" id="id_input_box">-->
<!--                        <h4 class="input_title">아이디(userid)</h4>-->
<!--                        <div class="input_item"><input type="text" placeholder="apple1" autocomplete="off"-->
<!--                                class="input_txt" id="id_input"></div>-->
<!--                        <p class="input_error" id="id_input_error"></p>-->
<!--                    </div>-->
                    <div class="input_box" id="email_input_box">
                        <h4 class="input_title">이메일</h4>
                        <div class="input_item"><input type="text" placeholder="apple1@apple.com" autocomplete="off"
                                                       class="input_txt" id="email_input"></div>
                        <p class="input_error" id="email_input_error"></p>
                    </div>
                    <div class="input_box" id="password_input_box">
                        <h4 class="input_title">비밀번호</h4>
                        <div class="input_item"><input type="password" placeholder="영문, 숫자, 특수문자를 조합해서 입력해주세요. (8-16자)" autocomplete="off"
                                                       class="input_txt" id="password_input"></div>
                        <p class="input_error" id="password_input_error"></p>
                    </div>
                    <div class="input_box" id="name_input_box">
                        <h4 class="input_title">이름</h4>
                        <div class="input_item"><input type="text" placeholder="김사과" autocomplete="off"
                                class="input_txt" id="name_input"></div>
                        <p class="input_error" id="name_input_error"></p>
                    </div>
<!--                    <div class="input_box" id="nickname_input_box">-->
<!--                        <h4 class="input_title">닉네임</h4>-->
<!--                        <div class="input_item"><input type="text" placeholder="happy_apple" autocomplete="off"-->
<!--                                class="input_txt" id="nickname_input"></div>-->
<!--                        <p class="input_error" id="nickname_input_error"></p>-->
<!--                    </div>-->
                </div>
            </div>
            <div class="user_bind img">
                <div class="uploadImg">
                    <div class="filebox">
                        <input class="upload-name" value="선택된 파일 없음" disabled="disabled">
                        <input type="file" id="file1" class="upload-hidden" name="file1">
                        <label for="file1">이미지 첨부</label>
                    </div>
                    <img id="previewImg" onclick="popImage(this.src)">
                </div>
            </div>
        </div>
        <div class="center">
            <div class="user_bind">
                <div class="user_input">
                    <div class="input_box" id="hp_input_box">
                        <h4 class="input_title">전화번호</h4>
                        <div class="input_item"><input type="text" maxlength="13" oninput="autoHyphen(this)" placeholder="- 없이 입력"
                                                       autocomplete="off" class="input_txt" id="hp_input"></div>
                        <p class="input_error" id="hp_input_error"></p>
                    </div>
<!--                    <div class="input_box" id="birthdate_input_box">-->
<!--                        <h4 class="input_title">생일</h4>-->
<!--                        <div class="input_item">-->
<!--                            <input type="number" maxlength="6" oninput="maxLengthCheck(this)" placeholder="960930" autocomplete="off" class="input_txt" id="birthdate_input">-->
<!--                        </div>-->
<!--                        <p class="input_error" id="birthdate_input_error"></p>-->
<!--                    </div>-->
                </div>
            </div>
            <div class="user_bind">
                <div class="user_input">
                    <div class="input_box" id="shoeSize_input_box">
                        <h4 class="input_title">사이즈</h4>
                        <div class="input_item">
                            <input type="number" maxlength="3" oninput="maxLengthCheck(this)" placeholder="240" autocomplete="off" class="input_txt" id="shoeSize_input">
                        </div>
                        <p class="input_error" id="shoeSize_input_error"></p>
                    </div>
<!--                    <div class="input_box" id="gender_input_box">-->
<!--                        <h4 class="input_title">성별</h4>-->
<!--                        <div class="input_item">-->
<!--                            <input type="text" placeholder="여자" autocomplete="off"-->
<!--                                class="input_txt" id="gender_input"></div>-->
<!--                        <p class="input_error" id="gender_input_error"></p>-->
<!--                    </div>-->
<!--                    <div class="input_box" id="point_input_box">-->
<!--                        <h4 class="input_title">포인트</h4>-->
<!--                        <div class="input_item"><input type="text" placeholder="3300" autocomplete="off"-->
<!--                                class="input_txt" id="point_input"></div>-->
<!--                        <p class="input_error" id="point_input_error"></p>-->
<!--                    </div>-->
                </div>
            </div>
        </div>

        <div class="layer_btn">
            <a href="#" class="btn btn_delete outlinegrey medium" onclick="close_member_create()"> 취소 </a>
            <a disabled="disabled" id="memberCreateBtn" class="btn btn_save solid medium disabled"> 저장하기 </a>
        </div>
        </div>
    </div>
</div>
<script>
    $(document).ready(function(){
        //파일첨부 이벤트
        $('.filebox .upload-hidden').on('change', function(){
            if(window.FileReader){
                var filename = $(this)[0].files[0].name;
                if(!validFileType(filename)){
                    alert("허용하지 않는 확장자 파일입니다.");
                    return false;
                }else{
                    if(!validFileSize($(this)[0].files[0])){
                        alert("파일 사이즈가 10MB를 초과합니다.");
                        return false;
                    }else{
                        if(!validFileNameSize(filename)){
                            alert("파일명이 30자를 초과합니다.");
                            return false;
                        }
                    }
                }
            } else {
                var filename = $(this).val().split('/').pop().split('\\').pop();
            }
            $(this).prev().val(filename); //input upload-name 에 파일명 설정해주기

            readImage($(this)[0]); //미리보기
        });
    });

    function validFileType(filename) {
        const fileTypes = ["png", "jpg", "jpeg"];
		return fileTypes.indexOf(filename.substring(filename.lastIndexOf(".")+1, filename.length).toLowerCase()) >= 0;
	}
    function validFileSize(file){
        if(file.size > 10000000){ //10MB
            return false;
        }else{
            return true;
        }
    }

    function validFileNameSize(filename){
        if(filename.length > 30){ //30자
            return false;
        }else{
            return true;
        }
    }

    //이미지 띄우기
    function readImage(input) {
	    if(input.files && input.files[0]) {
	        const reader = new FileReader();
	        reader.onload = function(e){
	            const previewImage = document.getElementById("previewImg");
	            previewImage.src = e.target.result;
	        }
	        // reader가 이미지 읽도록 하기
	        reader.readAsDataURL(input.files[0]);
	    }
	}
    //이미지 원본 팝업 띄우기
    function popImage(url) {
        var img = new Image();
        img.src = url;
        var img_width = img.width;
        var win_width = img.width + 25;
        var img_height = img.height;
        var win = img.height + 30;
        var popup = window.open('', '_blank', 'width=' + img_width + ', height=' + img_height + ', menubars=no, scrollbars=auto');
        popup.document.write("<style>body{margin:0px;}</style><img src='"+url+"' width='"+win_width+"'>");
    }
</script>
<script src="/static/js/admin/member.js"></script>